{
  "hash": "93dbc903ecde8ee8815b95934ae87b67",
  "result": {
    "markdown": "---\ntitle: Getting to Know Your Classmates Data\nauthor: Carlos Castillo, Yang Chen, Nick Hicks, Manisha Kasam\ndate: June 30, 2023\n---\n\n\n# Preparing and Loading Data\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(stringr)\nlibrary(countrycode)\nlibrary(ggthemes)\n\n# setwd(\"summer_r\")\nclassmates <- read.csv(\"data/Get_to_know_survey_2023.csv\")\nglimpse(classmates)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 96\nColumns: 7\n$ Birth_Month_Year        <chr> \"December, 1999\", \"7, 1998\", \"April, 1999\", \"N…\n$ State                   <chr> \"North Carolina\", \"Virginia\", \"North Carolina\"…\n$ Country                 <chr> \"United States\", \"United States\", \"United Stat…\n$ Languages               <chr> \"English\", \"English, Spanish\", \"English\", \"Eng…\n$ When_Hear_About_Program <chr> \"1-2 years\", \"1-2 years\", \"3-5 years\", \"Less t…\n$ How_Hear_About_Program  <chr> \"1. Recommended by professors\", \"2. Recommende…\n$ Hobbies                 <chr> \"Video Games, Sports\", \"Movies, Television Ser…\n```\n:::\n:::\n\n\n# Birth_Month Column\n​\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates <- classmates %>%\n    rowwise() %>%\n    mutate(Birth_Month = str_split(Birth_Month_Year, \", \")[[1]][1])\n\nclassmates %>%\n    select(Birth_Month)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 96 × 1\n# Rowwise: \n   Birth_Month\n   <chr>      \n 1 December   \n 2 7          \n 3 April      \n 4 November   \n 5 June       \n 6 December   \n 7 May        \n 8 January    \n 9 October    \n10 November   \n# ℹ 86 more rows\n```\n:::\n:::\n\n\n# Birth_Year Column\n​\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates <- classmates %>%\n    rowwise() %>%\n    mutate(Birth_Year = str_split(Birth_Month_Year, \", \")[[1]][2])\n\nclassmates %>%\n    select(Birth_Year)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 96 × 1\n# Rowwise: \n   Birth_Year\n   <chr>     \n 1 1999      \n 2 1998      \n 3 1999      \n 4 1999      \n 5 1991      \n 6 1999      \n 7 2000      \n 8 1998      \n 9 1998      \n10 2001      \n# ℹ 86 more rows\n```\n:::\n:::\n\n\n# Standardizing Birth_Year and Birth_Month\n​\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates <- classmates %>%\n    mutate(Birth_Month = str_to_title(str_trim(Birth_Month))) %>%\n    mutate(Birth_Month = ifelse(Birth_Month %in% as.character(1:12), month.name[as.integer(Birth_Month)], Birth_Month))\n\nclassmates <- classmates %>%\n    mutate_at(c(\"Birth_Year\"), ~ na_if(., \"\"))\n\nclassmates %>%\n    select(Birth_Month, Birth_Year)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 96 × 2\n# Rowwise: \n   Birth_Month Birth_Year\n   <chr>       <chr>     \n 1 December    1999      \n 2 July        1998      \n 3 April       1999      \n 4 November    1999      \n 5 June        1991      \n 6 December    1999      \n 7 May         2000      \n 8 January     1998      \n 9 October     1998      \n10 November    2001      \n# ℹ 86 more rows\n```\n:::\n:::\n\n\n# 5 Most Frequent Birth Months, 5 Least Frequent\n​\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates %>%\n    filter(!is.na(Birth_Month)) %>%\n    count(Birth_Month) %>%\n    arrange(desc(n)) %>%\n    head(n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n# Rowwise: \n  Birth_Month     n\n  <chr>       <int>\n1 October        13\n2 May            12\n3 February       10\n4 June            9\n5 September       9\n```\n:::\n\n```{.r .cell-code}\nclassmates %>%\n    filter(!is.na(Birth_Month)) %>%\n    count(Birth_Month) %>%\n    arrange(n) %>%\n    head(n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n# Rowwise: \n  Birth_Month     n\n  <chr>       <int>\n1 March           4\n2 January         5\n3 July            5\n4 November        6\n5 April           7\n```\n:::\n:::\n\n\n# 5 Most Frequent Birth Years, 5 Least Frequent\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates %>%\n    count(Birth_Year) %>%\n    arrange(desc(n)) %>%\n    head(n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n# Rowwise: \n  Birth_Year     n\n  <chr>      <int>\n1 2001          24\n2 2000          19\n3 1999          16\n4 1998           6\n5 1995           5\n```\n:::\n\n```{.r .cell-code}\nclassmates %>%\n    count(Birth_Year) %>%\n    arrange(n) %>%\n    head(n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n# Rowwise: \n  Birth_Year     n\n  <chr>      <int>\n1 1971           1\n2 1979           1\n3 1987           1\n4 1989           1\n5 1992           1\n```\n:::\n:::\n\n\n# Standardizing Country Column\n\nWe are standardizing `Country` first. We decided that we would also be filtering out any US state with a non-US country combination.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates <- classmates %>%\n    mutate_at(c(\"Country\"), ~ na_if(., \"\")) %>%\n    mutate(Country = str_to_title(str_trim(Country))) %>%\n    mutate(Country = str_replace_all(Country, c(\"[Uu]\\\\.*s\\\\.*a*\\\\.*\" = \"United States\", \".*United States*.*\" = \"United States\"))) %>%\n    mutate(Country = ifelse(is.na(Country), \"United States\", Country)) %>%\n    mutate(Country = countrycode(Country, \"country.name\", \"country.name\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: There was 1 warning in `mutate()`.\nℹ In argument: `Country = countrycode(Country, \"country.name\",\n  \"country.name\")`.\nℹ In row 76.\nCaused by warning:\n! Some values were not matched unambiguously: Durham\n```\n:::\n\n```{.r .cell-code}\nclassmates %>%\n    filter(!is.na(Country)) %>%\n    count(Country) %>%\n    arrange(desc(n)) %>%\n    head(n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n# Rowwise: \n  Country           n\n  <chr>         <int>\n1 United States    75\n2 South Korea       4\n3 China             3\n4 India             3\n5 Nigeria           2\n```\n:::\n\n```{.r .cell-code}\nclassmates %>%\n    filter(!is.na(Country)) %>%\n    count(Country) %>%\n    arrange(n) %>%\n    head(n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n# Rowwise: \n  Country             n\n  <chr>           <int>\n1 Guatemala           1\n2 Mexico              1\n3 Myanmar (Burma)     1\n4 Peru                1\n5 Singapore           1\n```\n:::\n:::\n\n\n# Filtering Out Non-US States, Standardizing States\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates <- classmates %>%\n    mutate(State = str_trim(State)) %>%\n    mutate(State = case_when(\n        str_detect(Country, \"United States\", negate = TRUE) ~ NA_character_,\n        (str_to_upper(State) %in% state.abb) ~ state.name[match(State, state.abb)],\n        (str_to_title(State) %in% state.name) ~ State,\n        TRUE ~ NA_character_\n    )) %>%\n    mutate(State = str_to_title(State))\n\nclassmates %>%\n    select(State)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 96 × 1\n# Rowwise: \n   State         \n   <chr>         \n 1 North Carolina\n 2 Virginia      \n 3 North Carolina\n 4 California    \n 5 Kentucky      \n 6 North Carolina\n 7 <NA>          \n 8 <NA>          \n 9 North Carolina\n10 Illinois      \n# ℹ 86 more rows\n```\n:::\n:::\n\n\n# Five Most Frequent States, Five Least Frequent States\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates %>%\n    filter(!is.na(State)) %>%\n    count(State) %>%\n    arrange(desc(n)) %>%\n    head(n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n# Rowwise: \n  State              n\n  <chr>          <int>\n1 North Carolina    52\n2 California         3\n3 Florida            2\n4 Illinois           2\n5 Massachusetts      2\n```\n:::\n\n```{.r .cell-code}\nclassmates %>%\n    filter(!is.na(State)) %>%\n    count(State) %>%\n    arrange(n) %>%\n    head(n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n# Rowwise: \n  State           n\n  <chr>       <int>\n1 Alabama         1\n2 Arizona         1\n3 Connecticut     1\n4 Kentucky        1\n5 Minnesota       1\n```\n:::\n:::\n\n\n# Cleaning `How_Hear_About_Program` Column\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates <- classmates %>%\n    mutate(How_Hear_About_Program = str_trim(How_Hear_About_Program)) %>%\n    mutate(How_Hear_About_Program = paste(str_split(How_Hear_About_Program, \" \")[[1]][-1], collapse = \" \"))\n\nclassmates %>%\n    filter(!is.na(How_Hear_About_Program)) %>%\n    count(How_Hear_About_Program) %>%\n    arrange(desc(n)) %>%\n    head(n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n# Rowwise: \n  How_Hear_About_Program                       n\n  <chr>                                    <int>\n1 Recommended by family/friends               49\n2 Search engine                               28\n3 Recommended by professors                   13\n4 On social media (Twitter, Instagram, FB)     4\n5 Recommendations found in blogs               2\n```\n:::\n:::\n\n\n# Wide to Long `Languages` Column\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates_copy <- data.frame(classmates)\nclassmates <- classmates %>%\n    mutate(Languages = str_squish(Languages)) %>%\n    separate_longer_delim(Languages, \", \") %>%\n    mutate(Languages = str_replace_all(Languages, \",\", \"\"))\n\nclassmates\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 150 × 9\n   Birth_Month_Year State          Country      Languages When_Hear_About_Prog…¹\n   <chr>            <chr>          <chr>        <chr>     <chr>                 \n 1 December, 1999   North Carolina United Stat… English   1-2 years             \n 2 7, 1998          Virginia       United Stat… English   1-2 years             \n 3 7, 1998          Virginia       United Stat… Spanish   1-2 years             \n 4 April, 1999      North Carolina United Stat… English   3-5 years             \n 5 November, 1999   California     United Stat… English   Less than one year ago\n 6 June, 1991       Kentucky       United Stat… English   1-2 years             \n 7 December, 1999   North Carolina United Stat… English   Less than one year ago\n 8 May, 2000        <NA>           South Korea  English   Less than one year ago\n 9 May, 2000        <NA>           South Korea  Korean    Less than one year ago\n10 January, 1998    <NA>           South Korea  English   1-2 years             \n# ℹ 140 more rows\n# ℹ abbreviated name: ¹​When_Hear_About_Program\n# ℹ 4 more variables: How_Hear_About_Program <chr>, Hobbies <chr>,\n#   Birth_Month <chr>, Birth_Year <chr>\n```\n:::\n\n```{.r .cell-code}\nlanguages_top_5 <- classmates %>%\n    filter(!is.na(Languages)) %>%\n    count(Languages) %>%\n    arrange(desc(n)) %>%\n    head(5)\n\nlanguages_top_5\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n  Languages     n\n  <chr>     <int>\n1 English      96\n2 Spanish      19\n3 Chinese      13\n4 Telugu        5\n5 Korean        4\n```\n:::\n:::\n\n\n# Extra Cleaning & Analyses\n\n## Top 5 Languages Visualized\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(languages_top_5, aes(x = reorder(Languages, desc(n)), y = n, fill = Languages)) +\n    geom_col() +\n    labs(x = \"Languages\", y = \"Counts\", title = \"MSA Class of 2024: Top 5 Languages\") +\n    theme_economist()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n## Wide to Long `Hobbies` Column\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates <- classmates %>%\n    mutate(Hobbies = str_squish(Hobbies)) %>%\n    separate_longer_delim(Hobbies, \", \")\n\nclassmates\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 502 × 9\n   Birth_Month_Year State          Country      Languages When_Hear_About_Prog…¹\n   <chr>            <chr>          <chr>        <chr>     <chr>                 \n 1 December, 1999   North Carolina United Stat… English   1-2 years             \n 2 December, 1999   North Carolina United Stat… English   1-2 years             \n 3 7, 1998          Virginia       United Stat… English   1-2 years             \n 4 7, 1998          Virginia       United Stat… English   1-2 years             \n 5 7, 1998          Virginia       United Stat… English   1-2 years             \n 6 7, 1998          Virginia       United Stat… English   1-2 years             \n 7 7, 1998          Virginia       United Stat… Spanish   1-2 years             \n 8 7, 1998          Virginia       United Stat… Spanish   1-2 years             \n 9 7, 1998          Virginia       United Stat… Spanish   1-2 years             \n10 7, 1998          Virginia       United Stat… Spanish   1-2 years             \n# ℹ 492 more rows\n# ℹ abbreviated name: ¹​When_Hear_About_Program\n# ℹ 4 more variables: How_Hear_About_Program <chr>, Hobbies <chr>,\n#   Birth_Month <chr>, Birth_Year <chr>\n```\n:::\n\n```{.r .cell-code}\nclassmates_copy <- classmates_copy %>%\n    mutate(Hobbies = str_squish(Hobbies)) %>%\n    separate_longer_delim(Hobbies, \", \")\n\nhobbies_top_5 <- classmates_copy %>%\n    filter(!is.na(Hobbies)) %>%\n    count(Hobbies) %>%\n    arrange(desc(n)) %>%\n    head(n = 5)\n\nhobbies_top_5\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                          Hobbies  n\n1 Outside Recreational Activities 59\n2                          Sports 50\n3               Television Series 48\n4                          Movies 47\n5                           Music 34\n```\n:::\n:::\n\n\n## Top 5 Hobbies Visualized\n\nNote: Using copy of older `classmates` data frame since we don't want to \"double-count\" student hobbies after making the `language` column long. Maybe there's a better way to do this through grouping.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(hobbies_top_5, aes(x = reorder(Hobbies, desc(n)), y = n, fill = Hobbies)) +\n    geom_col() +\n    labs(x = \"Hobbies\", y = \"Counts\", title = \"MSA Class of 2024: Top 5 Hobbies\") +\n    theme_economist()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n## Standardizing Birth_Month_Year\n\n::: {.cell}\n\n```{.r .cell-code}\nclassmates <- classmates %>%\n    mutate(Birth_Month_Year = paste(Birth_Month, Birth_Year, sep = \", \"))\n\nclassmates %>%\n    select(Birth_Month_Year)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 502 × 1\n   Birth_Month_Year\n   <chr>           \n 1 December, 1999  \n 2 December, 1999  \n 3 July, 1998      \n 4 July, 1998      \n 5 July, 1998      \n 6 July, 1998      \n 7 July, 1998      \n 8 July, 1998      \n 9 July, 1998      \n10 July, 1998      \n# ℹ 492 more rows\n```\n:::\n:::\n\n\n## Student Countries Heatmap\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\n\nselected_countries <- classmates %>%\n    select(Country) %>%\n    distinct(Country) %>%\n    arrange(Country)\nworld_data <- ne_countries(scale = \"medium\", returnclass = \"sf\")\nselected_countries_data <- world_data %>%\n    inner_join(selected_countries, by = c(\"name\" = \"Country\"))\n\nggplot() +\n    geom_sf(data = world_data, color = \"grey50\", fill = \"lightblue\") +\n    geom_sf(data = selected_countries_data, fill = \"red\", alpha = 0.7) +\n    labs(\n        title = \"Countries of Origin\",\n        subtitle = \"MSA 2024\",\n        caption = \"Library: Natural Earth\"\n    ) +\n    theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}