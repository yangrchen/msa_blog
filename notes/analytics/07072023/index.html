<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Yang Chen">
<meta name="dcterms.date" content="2023-07-07">

<title>Yang MSA - Model Selection</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../favicon.ico" rel="icon">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Yang MSA</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../notes/index.html" rel="" target="">
 <span class="menu-text">Notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../blog/index.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/yangrchen" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Model Selection</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">analytics</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Yang Chen </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 7, 2023</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">July 23, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#model-building-concepts" id="toc-model-building-concepts" class="nav-link active" data-scroll-target="#model-building-concepts"><span class="header-section-number">1</span> Model Building Concepts</a></li>
  <li><a href="#fear-of-overfitting" id="toc-fear-of-overfitting" class="nav-link" data-scroll-target="#fear-of-overfitting"><span class="header-section-number">2</span> Fear of Overfitting</a></li>
  <li><a href="#information-criteria" id="toc-information-criteria" class="nav-link" data-scroll-target="#information-criteria"><span class="header-section-number">3</span> Information Criteria</a>
  <ul class="collapse">
  <li><a href="#akaike-information-criterion" id="toc-akaike-information-criterion" class="nav-link" data-scroll-target="#akaike-information-criterion"><span class="header-section-number">3.1</span> Akaike Information Criterion</a></li>
  <li><a href="#bayesian-information-criterion" id="toc-bayesian-information-criterion" class="nav-link" data-scroll-target="#bayesian-information-criterion"><span class="header-section-number">3.2</span> Bayesian Information Criterion</a></li>
  </ul></li>
  <li><a href="#forward-selection" id="toc-forward-selection" class="nav-link" data-scroll-target="#forward-selection"><span class="header-section-number">4</span> Forward Selection</a>
  <ul class="collapse">
  <li><a href="#r-code" id="toc-r-code" class="nav-link" data-scroll-target="#r-code"><span class="header-section-number">4.1</span> R Code</a></li>
  <li><a href="#python-code" id="toc-python-code" class="nav-link" data-scroll-target="#python-code"><span class="header-section-number">4.2</span> Python Code</a></li>
  <li><a href="#other-criteria" id="toc-other-criteria" class="nav-link" data-scroll-target="#other-criteria"><span class="header-section-number">4.3</span> Other Criteria</a></li>
  </ul></li>
  <li><a href="#backward-selection" id="toc-backward-selection" class="nav-link" data-scroll-target="#backward-selection"><span class="header-section-number">5</span> Backward Selection</a>
  <ul class="collapse">
  <li><a href="#r-code-1" id="toc-r-code-1" class="nav-link" data-scroll-target="#r-code-1"><span class="header-section-number">5.1</span> R Code</a></li>
  </ul></li>
  <li><a href="#stepwise-selection" id="toc-stepwise-selection" class="nav-link" data-scroll-target="#stepwise-selection"><span class="header-section-number">6</span> Stepwise Selection</a>
  <ul class="collapse">
  <li><a href="#r-code-2" id="toc-r-code-2" class="nav-link" data-scroll-target="#r-code-2"><span class="header-section-number">6.1</span> R Code</a></li>
  </ul></li>
  <li><a href="#issues-with-automatic-search-algorithms" id="toc-issues-with-automatic-search-algorithms" class="nav-link" data-scroll-target="#issues-with-automatic-search-algorithms"><span class="header-section-number">7</span> Issues With Automatic Search Algorithms</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="model-building-concepts" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Model Building Concepts</h1>
<p><strong>Information criteria</strong> are metrics that are commonly used to “select” variables for the model.</p>
<p><strong>Selection algorithm</strong> is an automated technique to evaluate variables based on some selection criteria.</p>
<ul>
<li>Stepwise Selection (forward, backward, stepwise)</li>
<li>All-regression Selection (<span class="math inline">\(R^2\)</span>, <span class="math inline">\(R_a^2\)</span>, Mallow’s <span class="math inline">\(C_p\)</span>)</li>
</ul>
<p>All-regression selection tends to be unusable for datasets of a large size so we focus on stepwise selection for now.</p>
</section>
<section id="fear-of-overfitting" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Fear of Overfitting</h1>
<p>Model selection should always be done with training data.</p>
<p>Always hold out validation / testing data to help evaluate if we have overfit our data.</p>
</section>
<section id="information-criteria" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Information Criteria</h1>
<p>AIC and BIC approximate out-of-sample prediction error by applying a model complexity penalty.</p>
<p>Lower values are “better” than higher. No amount of lower is “better” enough.</p>
<p>The two criteria may not always agree, but neither is necessarily better.</p>
<section id="akaike-information-criterion" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="akaike-information-criterion"><span class="header-section-number">3.1</span> Akaike Information Criterion</h2>
<p><span class="math display">\[
AIC = -2\log(L) + 2k
\]</span></p>
<p>Crude, large-sample approximation of leave-one-out cross-validation.</p>
</section>
<section id="bayesian-information-criterion" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="bayesian-information-criterion"><span class="header-section-number">3.2</span> Bayesian Information Criterion</h2>
<p>Favors smaller models and penalizes model complexity more.</p>
<p><span class="math display">\[
BIC = -2\log(L) + k\log(n)
\]</span></p>
</section>
</section>
<section id="forward-selection" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Forward Selection</h1>
<p>Start with a “null” model (just the intercept) and build up the model one variable at a time.</p>
<ol type="1">
<li>Start with intercept only model</li>
<li>For each variable not in model, create a linear regression model with the base model plus this variable</li>
<li>See which linear regression is best relative to the criterion</li>
<li>If better than base model, continue. Otherwise, stop.</li>
<li>Update base model to new model, repeat whole process</li>
</ol>
<p>Once a variable enters the model in forward selection, the variable never leaves the model. This is a greedy algorithm so we might lose out on a better model since our initial decision on the best feature determines future decisions.</p>
<section id="r-code" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="r-code"><span class="header-section-number">4.1</span> R Code</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(AmesHousing)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>ames <span class="ot">&lt;-</span> <span class="fu">make_ordinal_ames</span>()</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">sample_frac</span>(ames, <span class="fl">0.7</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>train_sel <span class="ot">&lt;-</span> train <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Sale_Price, Lot_Area, Street, Bldg_Type, House_Style, Overall_Qual, Roof_Style, Central_Air, First_Flr_SF, Second_Flr_SF, Full_Bath, Half_Bath, Fireplaces, Garage_Area, Gr_Liv_Area, TotRms_AbvGrd) <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">replace</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>full.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Sale_Price <span class="sc">~</span> ., <span class="at">data =</span> train_sel)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>empty.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Sale_Price <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train_sel)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>for.model <span class="ot">&lt;-</span> <span class="fu">step</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    empty.model,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">scope =</span> <span class="fu">list</span>(</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">lower =</span> empty.model,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">upper =</span> full.model</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction =</span> <span class="st">"forward"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">k =</span> <span class="dv">2</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">trace =</span> <span class="cn">FALSE</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>for.model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + 
    House_Style + Bldg_Type + Fireplaces + Full_Bath + Half_Bath + 
    Central_Air + Roof_Style + Lot_Area + TotRms_AbvGrd + Second_Flr_SF + 
    First_Flr_SF, data = train_sel)

Coefficients:
                (Intercept)               Overall_Qual.L  
                  5.330e+04                    2.253e+05  
             Overall_Qual.Q               Overall_Qual.C  
                  6.775e+04                    2.059e+04  
             Overall_Qual^4               Overall_Qual^5  
                 -2.690e+04                   -2.221e+04  
             Overall_Qual^6               Overall_Qual^7  
                 -2.060e+04                   -5.623e+03  
             Overall_Qual^8               Overall_Qual^9  
                 -1.912e+03                   -1.680e+03  
                Gr_Liv_Area                  Garage_Area  
                  1.753e+01                    3.572e+01  
House_StyleOne_and_Half_Unf         House_StyleOne_Story  
                  1.578e+04                    2.329e+04  
          House_StyleSFoyer              House_StyleSLvl  
                  3.737e+04                    9.080e+03  
House_StyleTwo_and_Half_Fin  House_StyleTwo_and_Half_Unf  
                 -4.085e+03                   -1.131e+04  
       House_StyleTwo_Story            Bldg_TypeTwoFmCon  
                 -6.782e+02                   -1.065e+04  
            Bldg_TypeDuplex               Bldg_TypeTwnhs  
                 -3.016e+04                   -1.742e+04  
            Bldg_TypeTwnhsE                   Fireplaces  
                 -1.108e+04                    8.431e+03  
                  Full_Bath                    Half_Bath  
                  1.624e+04                    1.241e+04  
               Central_AirY              Roof_StyleGable  
                  1.313e+04                   -5.028e+03  
          Roof_StyleGambrel                Roof_StyleHip  
                 -7.271e+03                    1.284e+03  
          Roof_StyleMansard               Roof_StyleShed  
                 -4.436e+04                    1.637e+04  
                   Lot_Area                TotRms_AbvGrd  
                  4.253e-01                   -1.944e+03  
              Second_Flr_SF                 First_Flr_SF  
                  3.561e+01                    2.954e+01  </code></pre>
</div>
</div>
<ul>
<li>Good practice to specify the full and empty models</li>
<li><code>k = 2</code> is selecting the AIC criteria</li>
</ul>
</section>
<section id="python-code" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="python-code"><span class="header-section-number">4.2</span> Python Code</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># from sklearn.feature_selection import SequentialFeatureSelector</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># import statsmodels.formula.api as smf</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># model = </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The model obtained through forward selection is not necessarily a model where all variables are significant.</p>
</section>
<section id="other-criteria" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="other-criteria"><span class="header-section-number">4.3</span> Other Criteria</h2>
<p>Using <code>k = qchisq(0.05, 1, lower.tail = FALSE)</code> would replace the selection criteria with p-value selection. <span class="math inline">\(\alpha = 0.05\)</span> in this case.</p>
<p><code>k = log(nrow(train_sel))</code> would use the BIC criterion.</p>
</section>
</section>
<section id="backward-selection" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Backward Selection</h1>
<p>Remove variables in the model one at a time.</p>
<ol type="1">
<li>Start with full model with all variables</li>
<li>Create models such that each model has exactly one predictor variable removed from it and calculate the criterion for each model</li>
<li>See which linear regression is best based on criterion</li>
<li>If better than base, continue to next step otherwise STOP</li>
<li>Update base model to new model, repeat</li>
</ol>
<p>There are no guarantees that forward and back will agree.</p>
<section id="r-code-1" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="r-code-1"><span class="header-section-number">5.1</span> R Code</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>full.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Sale_Price <span class="sc">~</span> ., <span class="at">data =</span> train_sel)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>empty.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Sale_Price <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train_sel)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>back.model <span class="ot">&lt;-</span> <span class="fu">step</span>(</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    full.model,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">scope =</span> <span class="fu">list</span>(</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">lower =</span> empty.model,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">upper =</span> full.model</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction =</span> <span class="st">"backward"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">k =</span> <span class="dv">2</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">trace =</span> <span class="cn">FALSE</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>back.model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Sale_Price ~ Lot_Area + Bldg_Type + House_Style + 
    Overall_Qual + Roof_Style + Central_Air + First_Flr_SF + 
    Second_Flr_SF + Full_Bath + Half_Bath + Fireplaces + Garage_Area + 
    TotRms_AbvGrd, data = train_sel)

Coefficients:
                (Intercept)                     Lot_Area  
                  5.388e+04                    4.264e-01  
          Bldg_TypeTwoFmCon              Bldg_TypeDuplex  
                 -1.086e+04                   -3.034e+04  
             Bldg_TypeTwnhs              Bldg_TypeTwnhsE  
                 -1.738e+04                   -1.104e+04  
House_StyleOne_and_Half_Unf         House_StyleOne_Story  
                  1.502e+04                    2.238e+04  
          House_StyleSFoyer              House_StyleSLvl  
                  3.660e+04                    8.380e+03  
House_StyleTwo_and_Half_Fin  House_StyleTwo_and_Half_Unf  
                  2.183e+03                   -1.147e+04  
       House_StyleTwo_Story               Overall_Qual.L  
                 -8.826e+02                    2.251e+05  
             Overall_Qual.Q               Overall_Qual.C  
                  6.802e+04                    2.088e+04  
             Overall_Qual^4               Overall_Qual^5  
                 -2.693e+04                   -2.205e+04  
             Overall_Qual^6               Overall_Qual^7  
                 -2.053e+04                   -5.511e+03  
             Overall_Qual^8               Overall_Qual^9  
                 -1.940e+03                   -1.637e+03  
            Roof_StyleGable            Roof_StyleGambrel  
                 -5.125e+03                   -7.271e+03  
              Roof_StyleHip            Roof_StyleMansard  
                  1.201e+03                   -4.423e+04  
             Roof_StyleShed                 Central_AirY  
                  1.660e+04                    1.313e+04  
               First_Flr_SF                Second_Flr_SF  
                  4.688e+01                    5.205e+01  
                  Full_Bath                    Half_Bath  
                  1.636e+04                    1.244e+04  
                 Fireplaces                  Garage_Area  
                  8.452e+03                    3.572e+01  
              TotRms_AbvGrd  
                 -1.841e+03  </code></pre>
</div>
</div>
<p>It’s good idea to perform different types of selection to get an idea of what features to include in your final model.</p>
</section>
</section>
<section id="stepwise-selection" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Stepwise Selection</h1>
<p>Start with “null” model and build the model one variable at a time while also deleting variables.</p>
<ol type="1">
<li>Start with intercept only model</li>
<li>For each variable not in model, create a linear regression model with base model plus this variable</li>
<li>For each variable, create models with the base model taking away one variable at a time</li>
<li>See which linear regression is best based on criterion</li>
<li>If better than base model, continue to next step, otherwise STOP</li>
<li>Update base model to new model, repeat process</li>
</ol>
<p>With stepwise, once you decide to delete a model you never add it back into your model again.</p>
<section id="r-code-2" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="r-code-2"><span class="header-section-number">6.1</span> R Code</h2>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>full.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Sale_Price <span class="sc">~</span> ., <span class="at">data =</span> train_sel)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>empty.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Sale_Price <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> train_sel)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>step.model <span class="ot">&lt;-</span> <span class="fu">step</span>(empty.model,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">scope =</span> <span class="fu">list</span>(</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">lower =</span> empty.model,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">upper =</span> full.model</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction =</span> <span class="st">"both"</span>, <span class="at">k =</span> <span class="dv">2</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=46305.12
Sale_Price ~ 1

                Df  Sum of Sq        RSS   AIC
+ Overall_Qual   9 8.9476e+12 4.1305e+12 43959
+ Gr_Liv_Area    1 6.3401e+12 6.7380e+12 44947
+ Garage_Area    1 5.0342e+12 8.0439e+12 45310
+ First_Flr_SF   1 4.8282e+12 8.2498e+12 45362
+ Full_Bath      1 3.7035e+12 9.3746e+12 45624
+ TotRms_AbvGrd  1 3.0848e+12 9.9933e+12 45755
+ Fireplaces     1 2.9205e+12 1.0158e+13 45789
+ Half_Bath      1 1.2011e+12 1.1877e+13 46110
+ Lot_Area       1 1.1005e+12 1.1978e+13 46127
+ Roof_Style     5 1.0249e+12 1.2053e+13 46148
+ Second_Flr_SF  1 9.6666e+11 1.2111e+13 46150
+ Central_Air    1 9.5773e+11 1.2120e+13 46151
+ House_Style    7 9.7642e+11 1.2102e+13 46160
+ Bldg_Type      4 4.2909e+11 1.2649e+13 46245
+ Street         1 4.2397e+10 1.3036e+13 46300
&lt;none&gt;                        1.3078e+13 46305

Step:  AIC=43959.27
Sale_Price ~ Overall_Qual

                Df  Sum of Sq        RSS   AIC
+ Gr_Liv_Area    1 1.0152e+12 3.1153e+12 43383
+ First_Flr_SF   1 5.5472e+11 3.5758e+12 43665
+ Garage_Area    1 4.9681e+11 3.6337e+12 43698
+ TotRms_AbvGrd  1 4.3713e+11 3.6934e+12 43732
+ Lot_Area       1 4.1512e+11 3.7154e+12 43744
+ Full_Bath      1 4.0213e+11 3.7284e+12 43751
+ Fireplaces     1 3.9096e+11 3.7395e+12 43757
+ Bldg_Type      4 2.0899e+11 3.9215e+12 43861
+ Second_Flr_SF  1 1.7145e+11 3.9591e+12 43874
+ Half_Bath      1 1.5042e+11 3.9801e+12 43885
+ Central_Air    1 8.9320e+10 4.0412e+12 43916
+ Roof_Style     5 6.1841e+10 4.0687e+12 43938
+ House_Style    7 6.8610e+10 4.0619e+12 43939
&lt;none&gt;                        4.1305e+12 43959
+ Street         1 1.5665e+09 4.1289e+12 43960
- Overall_Qual   9 8.9476e+12 1.3078e+13 46305

Step:  AIC=43382.72
Sale_Price ~ Overall_Qual + Gr_Liv_Area

                Df  Sum of Sq        RSS   AIC
+ Garage_Area    1 2.2659e+11 2.8887e+12 43230
+ House_Style    7 2.4266e+11 2.8726e+12 43230
+ First_Flr_SF   1 1.3334e+11 2.9819e+12 43295
+ Lot_Area       1 1.1765e+11 2.9976e+12 43306
+ Second_Flr_SF  1 1.1675e+11 2.9985e+12 43306
+ Fireplaces     1 1.1490e+11 3.0004e+12 43308
+ Central_Air    1 1.1387e+11 3.0014e+12 43308
+ Bldg_Type      4 1.0718e+11 3.0081e+12 43319
+ Roof_Style     5 6.8802e+10 3.0465e+12 43347
+ TotRms_AbvGrd  1 3.6007e+10 3.0793e+12 43361
+ Full_Bath      1 2.8920e+10 3.0864e+12 43366
&lt;none&gt;                        3.1153e+12 43383
+ Half_Bath      1 1.4348e+08 3.1151e+12 43385
+ Street         1 8.2390e+07 3.1152e+12 43385
- Gr_Liv_Area    1 1.0152e+12 4.1305e+12 43959
- Overall_Qual   9 3.6227e+12 6.7380e+12 44947

Step:  AIC=43229.83
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area

                Df  Sum of Sq        RSS   AIC
+ House_Style    7 1.4770e+11 2.7410e+12 43136
+ Fireplaces     1 1.0316e+11 2.7855e+12 43157
+ Bldg_Type      4 8.5347e+10 2.8033e+12 43176
+ First_Flr_SF   1 7.2287e+10 2.8164e+12 43180
+ Lot_Area       1 6.9953e+10 2.8187e+12 43182
+ Central_Air    1 6.5148e+10 2.8235e+12 43185
+ Second_Flr_SF  1 6.1995e+10 2.8267e+12 43187
+ Roof_Style     5 5.7473e+10 2.8312e+12 43199
+ TotRms_AbvGrd  1 2.4600e+10 2.8641e+12 43214
+ Full_Bath      1 1.7808e+10 2.8709e+12 43219
&lt;none&gt;                        2.8887e+12 43230
+ Half_Bath      1 1.1099e+09 2.8876e+12 43231
+ Street         1 2.8613e+08 2.8884e+12 43232
- Garage_Area    1 2.2659e+11 3.1153e+12 43383
- Gr_Liv_Area    1 7.4501e+11 3.6337e+12 43698
- Overall_Qual   9 2.4655e+12 5.3542e+12 44477

Step:  AIC=43136.19
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + House_Style

                Df  Sum of Sq        RSS   AIC
+ Bldg_Type      4 1.0290e+11 2.6381e+12 43066
+ Fireplaces     1 7.7192e+10 2.6638e+12 43080
+ Central_Air    1 4.8657e+10 2.6923e+12 43101
+ Lot_Area       1 3.9464e+10 2.7015e+12 43108
+ Half_Bath      1 3.5572e+10 2.7054e+12 43111
+ Roof_Style     5 3.1060e+10 2.7099e+12 43123
+ TotRms_AbvGrd  1 1.3204e+10 2.7278e+12 43128
+ Full_Bath      1 1.2058e+10 2.7289e+12 43129
+ Second_Flr_SF  1 6.9797e+09 2.7340e+12 43133
+ First_Flr_SF   1 3.8725e+09 2.7371e+12 43135
&lt;none&gt;                        2.7410e+12 43136
+ Street         1 2.0718e+08 2.7408e+12 43138
- House_Style    7 1.4770e+11 2.8887e+12 43230
- Garage_Area    1 1.3162e+11 2.8726e+12 43230
- Gr_Liv_Area    1 8.3802e+11 3.5790e+12 43681
- Overall_Qual   9 2.1377e+12 4.8787e+12 44301

Step:  AIC=43065.72
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + House_Style + 
    Bldg_Type

                Df  Sum of Sq        RSS   AIC
+ Fireplaces     1 5.3177e+10 2.5849e+12 43026
+ Full_Bath      1 4.0451e+10 2.5976e+12 43036
+ Central_Air    1 3.6220e+10 2.6019e+12 43039
+ Half_Bath      1 3.3930e+10 2.6042e+12 43041
+ Lot_Area       1 2.2522e+10 2.6156e+12 43050
+ Roof_Style     5 3.0791e+10 2.6073e+12 43052
+ TotRms_AbvGrd  1 7.2496e+09 2.6308e+12 43062
+ Second_Flr_SF  1 4.5385e+09 2.6336e+12 43064
&lt;none&gt;                        2.6381e+12 43066
+ First_Flr_SF   1 1.9205e+09 2.6362e+12 43066
+ Street         1 1.7948e+04 2.6381e+12 43068
- Bldg_Type      4 1.0290e+11 2.7410e+12 43136
- Garage_Area    1 1.1463e+11 2.7527e+12 43151
- House_Style    7 1.6525e+11 2.8033e+12 43176
- Gr_Liv_Area    1 7.9533e+11 3.4334e+12 43604
- Overall_Qual   9 1.8395e+12 4.4776e+12 44133

Step:  AIC=43025.95
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + House_Style + 
    Bldg_Type + Fireplaces

                Df  Sum of Sq        RSS   AIC
+ Full_Bath      1 5.3553e+10 2.5314e+12 42985
+ Central_Air    1 3.1588e+10 2.5533e+12 43003
+ Half_Bath      1 2.5824e+10 2.5591e+12 43007
+ Roof_Style     5 2.7477e+10 2.5574e+12 43014
+ Lot_Area       1 1.3273e+10 2.5716e+12 43017
+ Second_Flr_SF  1 7.4034e+09 2.5775e+12 43022
+ TotRms_AbvGrd  1 5.8138e+09 2.5791e+12 43023
+ First_Flr_SF   1 4.1856e+09 2.5807e+12 43025
&lt;none&gt;                        2.5849e+12 43026
+ Street         1 7.3457e+07 2.5848e+12 43028
- Fireplaces     1 5.3177e+10 2.6381e+12 43066
- Bldg_Type      4 7.8883e+10 2.6638e+12 43080
- Garage_Area    1 1.1515e+11 2.7001e+12 43113
- House_Style    7 1.3884e+11 2.7238e+12 43119
- Gr_Liv_Area    1 5.8394e+11 3.1689e+12 43442
- Overall_Qual   9 1.7721e+12 4.3571e+12 44079

Step:  AIC=42985.01
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + House_Style + 
    Bldg_Type + Fireplaces + Full_Bath

                Df  Sum of Sq        RSS   AIC
+ Half_Bath      1 5.1361e+10 2.4800e+12 42945
+ Central_Air    1 2.9070e+10 2.5023e+12 42963
+ Roof_Style     5 2.5503e+10 2.5059e+12 42974
+ Lot_Area       1 1.5436e+10 2.5159e+12 42974
+ TotRms_AbvGrd  1 9.0738e+09 2.5223e+12 42980
+ Second_Flr_SF  1 4.9499e+09 2.5264e+12 42983
&lt;none&gt;                        2.5314e+12 42985
+ First_Flr_SF   1 2.3771e+09 2.5290e+12 42985
+ Street         1 4.7039e+06 2.5314e+12 42987
- Full_Bath      1 5.3553e+10 2.5849e+12 43026
- Fireplaces     1 6.6280e+10 2.5976e+12 43036
- Bldg_Type      4 1.0804e+11 2.6394e+12 43063
- Garage_Area    1 1.0246e+11 2.6338e+12 43064
- House_Style    7 1.3246e+11 2.6638e+12 43076
- Gr_Liv_Area    1 3.7608e+11 2.9074e+12 43267
- Overall_Qual   9 1.6798e+12 4.2112e+12 44011

Step:  AIC=42944.97
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + House_Style + 
    Bldg_Type + Fireplaces + Full_Bath + Half_Bath

                Df  Sum of Sq        RSS   AIC
+ Central_Air    1 2.0333e+10 2.4597e+12 42930
+ Roof_Style     5 2.7959e+10 2.4520e+12 42932
+ Lot_Area       1 1.4545e+10 2.4655e+12 42935
+ TotRms_AbvGrd  1 6.7754e+09 2.4732e+12 42941
&lt;none&gt;                        2.4800e+12 42945
+ Second_Flr_SF  1 1.0041e+09 2.4790e+12 42946
+ First_Flr_SF   1 1.3791e+08 2.4799e+12 42947
+ Street         1 6.0636e+06 2.4800e+12 42947
- Half_Bath      1 5.1361e+10 2.5314e+12 42985
- Fireplaces     1 5.7280e+10 2.5373e+12 42990
- Full_Bath      1 7.9091e+10 2.5591e+12 43007
- Garage_Area    1 9.3927e+10 2.5739e+12 43019
- Bldg_Type      4 1.1726e+11 2.5973e+12 43032
- House_Style    7 1.7564e+11 2.6556e+12 43071
- Gr_Liv_Area    1 3.2037e+11 2.8004e+12 43192
- Overall_Qual   9 1.6443e+12 4.1243e+12 43970

Step:  AIC=42930.08
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + House_Style + 
    Bldg_Type + Fireplaces + Full_Bath + Half_Bath + Central_Air

                Df  Sum of Sq        RSS   AIC
+ Roof_Style     5 2.5288e+10 2.4344e+12 42919
+ Lot_Area       1 1.3407e+10 2.4463e+12 42921
+ TotRms_AbvGrd  1 6.4358e+09 2.4532e+12 42927
&lt;none&gt;                        2.4597e+12 42930
+ Second_Flr_SF  1 1.0474e+09 2.4586e+12 42931
+ First_Flr_SF   1 1.5556e+08 2.4595e+12 42932
+ Street         1 2.4334e+07 2.4596e+12 42932
- Central_Air    1 2.0333e+10 2.4800e+12 42945
- Half_Bath      1 4.2625e+10 2.5023e+12 42963
- Fireplaces     1 5.3799e+10 2.5135e+12 42972
- Full_Bath      1 7.3774e+10 2.5334e+12 42989
- Garage_Area    1 8.0640e+10 2.5403e+12 42994
- Bldg_Type      4 1.0761e+11 2.5673e+12 43010
- House_Style    7 1.5748e+11 2.6172e+12 43043
- Gr_Liv_Area    1 3.2463e+11 2.7843e+12 43182
- Overall_Qual   9 1.6390e+12 4.0986e+12 43959

Step:  AIC=42918.89
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + House_Style + 
    Bldg_Type + Fireplaces + Full_Bath + Half_Bath + Central_Air + 
    Roof_Style

                Df  Sum of Sq        RSS   AIC
+ Lot_Area       1 1.2743e+10 2.4216e+12 42910
+ TotRms_AbvGrd  1 6.7674e+09 2.4276e+12 42915
&lt;none&gt;                        2.4344e+12 42919
+ Second_Flr_SF  1 1.7805e+09 2.4326e+12 42919
+ First_Flr_SF   1 5.0223e+08 2.4339e+12 42920
+ Street         1 9.9104e+06 2.4344e+12 42921
- Roof_Style     5 2.5288e+10 2.4597e+12 42930
- Central_Air    1 1.7662e+10 2.4520e+12 42932
- Half_Bath      1 4.5653e+10 2.4800e+12 42955
- Fireplaces     1 4.9680e+10 2.4841e+12 42958
- Full_Bath      1 7.3391e+10 2.5078e+12 42978
- Garage_Area    1 8.1710e+10 2.5161e+12 42985
- Bldg_Type      4 1.0676e+11 2.5411e+12 42999
- House_Style    7 1.3844e+11 2.5728e+12 43018
- Gr_Liv_Area    1 3.1155e+11 2.7459e+12 43164
- Overall_Qual   9 1.5294e+12 3.9638e+12 43901

Step:  AIC=42910.12
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + House_Style + 
    Bldg_Type + Fireplaces + Full_Bath + Half_Bath + Central_Air + 
    Roof_Style + Lot_Area

                Df  Sum of Sq        RSS   AIC
+ TotRms_AbvGrd  1 5.7682e+09 2.4159e+12 42907
+ Second_Flr_SF  1 3.1200e+09 2.4185e+12 42909
&lt;none&gt;                        2.4216e+12 42910
+ First_Flr_SF   1 1.3587e+09 2.4203e+12 42911
+ Street         1 5.9804e+08 2.4210e+12 42912
- Lot_Area       1 1.2743e+10 2.4344e+12 42919
- Roof_Style     5 2.4624e+10 2.4463e+12 42921
- Central_Air    1 1.6739e+10 2.4384e+12 42922
- Fireplaces     1 4.1776e+10 2.4634e+12 42943
- Half_Bath      1 4.4895e+10 2.4665e+12 42946
- Garage_Area    1 7.3052e+10 2.4947e+12 42969
- Full_Bath      1 7.5383e+10 2.4970e+12 42971
- Bldg_Type      4 9.2243e+10 2.5139e+12 42979
- House_Style    7 1.2271e+11 2.5443e+12 42998
- Gr_Liv_Area    1 2.6745e+11 2.6891e+12 43123
- Overall_Qual   9 1.5420e+12 3.9636e+12 43903

Step:  AIC=42907.23
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + House_Style + 
    Bldg_Type + Fireplaces + Full_Bath + Half_Bath + Central_Air + 
    Roof_Style + Lot_Area + TotRms_AbvGrd

                Df  Sum of Sq        RSS   AIC
+ Second_Flr_SF  1 2.7018e+09 2.4132e+12 42907
&lt;none&gt;                        2.4159e+12 42907
+ First_Flr_SF   1 1.1092e+09 2.4148e+12 42908
+ Street         1 7.2720e+08 2.4151e+12 42909
- TotRms_AbvGrd  1 5.7682e+09 2.4216e+12 42910
- Lot_Area       1 1.1744e+10 2.4276e+12 42915
- Roof_Style     5 2.5174e+10 2.4410e+12 42918
- Central_Air    1 1.6622e+10 2.4325e+12 42919
- Fireplaces     1 4.1377e+10 2.4572e+12 42940
- Half_Bath      1 4.3214e+10 2.4591e+12 42942
- Garage_Area    1 7.0918e+10 2.4868e+12 42965
- Full_Bath      1 7.7707e+10 2.4936e+12 42970
- Bldg_Type      4 8.8794e+10 2.5047e+12 42973
- House_Style    7 1.1290e+11 2.5288e+12 42987
- Gr_Liv_Area    1 2.1986e+11 2.6357e+12 43084
- Overall_Qual   9 1.5465e+12 3.9624e+12 43904

Step:  AIC=42906.94
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + House_Style + 
    Bldg_Type + Fireplaces + Full_Bath + Half_Bath + Central_Air + 
    Roof_Style + Lot_Area + TotRms_AbvGrd + Second_Flr_SF

                Df  Sum of Sq        RSS   AIC
+ First_Flr_SF   1 2.8791e+09 2.4103e+12 42906
&lt;none&gt;                        2.4132e+12 42907
- Second_Flr_SF  1 2.7018e+09 2.4159e+12 42907
+ Street         1 7.8632e+08 2.4124e+12 42908
- TotRms_AbvGrd  1 5.3500e+09 2.4185e+12 42909
- Lot_Area       1 1.2960e+10 2.4261e+12 42916
- Central_Air    1 1.6592e+10 2.4298e+12 42919
- Roof_Style     5 2.6112e+10 2.4393e+12 42919
- Half_Bath      1 3.8564e+10 2.4517e+12 42937
- Fireplaces     1 4.2596e+10 2.4558e+12 42941
- House_Style    7 7.6515e+10 2.4897e+12 42957
- Garage_Area    1 7.2255e+10 2.4854e+12 42965
- Full_Bath      1 7.3494e+10 2.4867e+12 42966
- Bldg_Type      4 8.4464e+10 2.4976e+12 42969
- Gr_Liv_Area    1 1.6479e+11 2.5780e+12 43040
- Overall_Qual   9 1.5317e+12 3.9448e+12 43897

Step:  AIC=42906.49
Sale_Price ~ Overall_Qual + Gr_Liv_Area + Garage_Area + House_Style + 
    Bldg_Type + Fireplaces + Full_Bath + Half_Bath + Central_Air + 
    Roof_Style + Lot_Area + TotRms_AbvGrd + Second_Flr_SF + First_Flr_SF

                Df  Sum of Sq        RSS   AIC
- Gr_Liv_Area    1 1.0372e+09 2.4113e+12 42905
&lt;none&gt;                        2.4103e+12 42906
- First_Flr_SF   1 2.8791e+09 2.4132e+12 42907
+ Street         1 7.8646e+08 2.4095e+12 42908
- Second_Flr_SF  1 4.4717e+09 2.4148e+12 42908
- TotRms_AbvGrd  1 5.2917e+09 2.4156e+12 42909
- Lot_Area       1 1.2404e+10 2.4227e+12 42915
- Roof_Style     5 2.5899e+10 2.4362e+12 42918
- Central_Air    1 1.6608e+10 2.4269e+12 42919
- Half_Bath      1 3.8533e+10 2.4488e+12 42937
- Fireplaces     1 4.1774e+10 2.4521e+12 42940
- House_Style    7 6.6546e+10 2.4768e+12 42948
- Garage_Area    1 7.0948e+10 2.4812e+12 42964
- Full_Bath      1 7.3833e+10 2.4841e+12 42966
- Bldg_Type      4 8.5619e+10 2.4959e+12 42970
- Overall_Qual   9 1.5155e+12 3.9258e+12 43889

Step:  AIC=42905.37
Sale_Price ~ Overall_Qual + Garage_Area + House_Style + Bldg_Type + 
    Fireplaces + Full_Bath + Half_Bath + Central_Air + Roof_Style + 
    Lot_Area + TotRms_AbvGrd + Second_Flr_SF + First_Flr_SF

                Df  Sum of Sq        RSS   AIC
&lt;none&gt;                        2.4113e+12 42905
+ Gr_Liv_Area    1 1.0372e+09 2.4103e+12 42906
+ Street         1 8.1161e+08 2.4105e+12 42907
- TotRms_AbvGrd  1 4.8155e+09 2.4161e+12 42907
- Lot_Area       1 1.2471e+10 2.4238e+12 42914
- Roof_Style     5 2.5833e+10 2.4372e+12 42917
- Central_Air    1 1.6592e+10 2.4279e+12 42917
- Half_Bath      1 3.8729e+10 2.4501e+12 42936
- Fireplaces     1 4.1997e+10 2.4533e+12 42939
- House_Style    7 6.5585e+10 2.4769e+12 42946
- Garage_Area    1 7.0916e+10 2.4822e+12 42963
- Full_Bath      1 7.5174e+10 2.4865e+12 42966
- Bldg_Type      4 8.6350e+10 2.4977e+12 42970
- Second_Flr_SF  1 1.1648e+11 2.5278e+12 43000
- First_Flr_SF   1 1.6663e+11 2.5780e+12 43040
- Overall_Qual   9 1.5148e+12 3.9261e+12 43887</code></pre>
</div>
</div>
</section>
</section>
<section id="issues-with-automatic-search-algorithms" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Issues With Automatic Search Algorithms</h1>
<ul>
<li>Biases in parameter estimates, predictions, standard errors</li>
<li>Incorrect calculation of degrees of freedom (p-value method)</li>
<li>P-values that tend to err on the side of overestimating significance</li>
<li>Can result in locally best model (not global)</li>
</ul>
<p>In terms of p-value, you should always adjust your <span class="math inline">\(\alpha\)</span> size based on your sample size.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/conservative-p-values.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Conservative P-Values</figcaption>
</figure>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>